<!DOCTYPE html>
<html>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
  <head>
    <title>Cobra's Revenge</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        margin: 0;
        font-family: Arial, sans-serif;
        background-image: url("https://img.freepik.com/premium-vector/vector-horizontal-seamless-illustration-forest-magical-mist_284645-954.jpg");
        background-position: fixed;
        background-repeat: no-repeat;
        background-size: cover;
        /*  background-image: linear-gradient(
          130deg,
          rgb(11, 34, 52),
          rgb(18, 44, 58)
        );  */
      }

      #game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        border-radius: 20px;
        width: 30%;
        padding: 10px;
        text-align: center;
        box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
          rgba(0, 0, 0, 0.22) 0px 15px 12px;
      }
      #game-board {
        position: relative;
        width: 400px;
        height: 400px;
        box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
          rgba(0, 0, 0, 0.22) 0px 15px 12px;
        border-radius: 25px;
        background-position: fixed;
        background-repeat: no-repeat;
        background-size: cover;
        position: relative;
        border: 1px solid grey;
        bottom: 40px;
      }

      .cell {
        width: 20px;
        height: 20px;
        background-color: #320000;
        border: 1px solid #e3c9c9;
        position: absolute;
      }

      .food {
        background-color: #14ba1a;
        border-radius: 20px;
      }

      .snake {
        background-color: #d12121;
        border-radius: 20px;
      }

      .emoji {
        font-size: 16px;
      }
      p {
        font-family: "Courier New";
        font-size: 18px;
        color: rgb(255, 255, 255);
        position: relative;
        bottom: 40px;
      }

      #arrows {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        position: relative;
        bottom: 40px;
        box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
          rgba(0, 0, 0, 0.22) 0px 15px 12px;
        padding: 5px;
      }
      #arrows div {
        cursor: pointer;
        box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
          rgba(0, 0, 0, 0.22) 0px 15px 38px;
        color: white;

        font-size: 1.5rem;
      }
      #heading {
        color: red;
        font-family: "Courier New", Courier, monospace;
      }
      #hr {
        width: 100%;
        height: 1px;
        background-color: rgb(159, 36, 36);
        position: relative;
        bottom: 25px;
      }
      @media screen and (min-width: 100px) and (max-width: 750px) {
        #game-container {
          width: 100% !important;
        }
        #game-board {
          width: 100% !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="game-container">
      <h1 id="heading">Cobra's Revenge</h1>

      <div id="hr"></div>
      <p>
        Use the arrow keys to control the snake.Try to eat the food and avoid
        colliding with the walls or yourself!
      </p>

      <div id="game-board"></div>

      <div id="arrows">
        <div></div>
        <div id="up">⬆️</div>
        <div></div>

        <div id="left">⬅️</div>
        <!-- --- -->
        <div id="scores">0</div>

        <div id="right">➡️</div>
        <div></div>

        <div id="down">⬇️</div>

        <div></div>
      </div>
    </div>

    <script>
      //  <!-- ---- -->
      document.addEventListener("DOMContentLoaded", function () {
        const gameBoard = document.getElementById("game-board");
        const cellSize = 20;
        const boardSize = 400 / cellSize;
        const snake = [{ x: 10, y: 10 }];
        let food = { x: 5, y: 5 };
        let dx = 0;
        let dy = 0;
        let score = 0;
        let isChangingDirection = false;
        let gameInterval;

        // Generate random coordinates for the food
        function generateFood() {
          food = {
            x: Math.floor(Math.random() * boardSize),
            y: Math.floor(Math.random() * boardSize),
          };
        }

        // Move the snake
        function moveSnake() {
          const head = { x: snake[0].x + dx, y: snake[0].y + dy };
          snake.unshift(head);
          if (head.x === food.x && head.y === food.y) {
            generateFood();
            score++;
          } else {
            snake.pop();
          }
        }

        // Draw the game board
        function drawBoard() {
          gameBoard.innerHTML = "";

          // Draw snake
          snake.forEach((segment) => {
            const snakeElement = document.createElement("div");
            snakeElement.style.left = segment.x * cellSize + "px";
            snakeElement.style.top = segment.y * cellSize + "px";
            snakeElement.classList.add("cell");
            snakeElement.classList.add("snake");
            gameBoard.appendChild(snakeElement);
          });

          // Draw food
          const foodElement = document.createElement("div");
          foodElement.style.left = food.x * cellSize + "px";
          foodElement.style.top = food.y * cellSize + "px";
          foodElement.classList.add("cell");
          foodElement.classList.add("food");
          gameBoard.appendChild(foodElement);
        }

        // Change snake direction
        document.getElementById("up").addEventListener("click", () => {
          if (dy !== 1) {
            dx = 0;
            dy = -1;
            isChangingDirection = true;
          }
        });
        document.getElementById("down").addEventListener("click", () => {
          if (dy !== -1) {
            dx = 0;
            dy = 1;
            isChangingDirection = true;
          }
        });
        document.getElementById("left").addEventListener("click", () => {
          if (dx !== 1) {
            dx = -1;
            dy = 0;
            isChangingDirection = true;
          }
        });
        document.getElementById("right").addEventListener("click", () => {
          if (dx !== -1) {
            dx = 1;
            dy = 0;
            isChangingDirection = true;
          }
        });
        function changeDirection(event) {
          if (isChangingDirection) return;

          const keyPressed = event.key;
          switch (keyPressed) {
            case "ArrowUp":
              if (dy !== 1) {
                dx = 0;
                dy = -1;
                isChangingDirection = true;
              }
              break;
            case "ArrowDown":
              if (dy !== -1) {
                dx = 0;
                dy = 1;
                isChangingDirection = true;
              }
              break;
            case "ArrowLeft":
              if (dx !== 1) {
                dx = -1;
                dy = 0;
                isChangingDirection = true;
              }
              break;
            case "ArrowRight":
              if (dx !== -1) {
                dx = 1;
                dy = 0;
                isChangingDirection = true;
              }
              break;
          }

          clearInterval(gameInterval);
          gameInterval = setInterval(gameLoop, 125); // Reduced speed by 25%
        }

        // Game loop
        function gameLoop() {
          moveSnake();
          drawBoard();

          // Check for game over conditions
          const head = snake[0];
          if (
            head.x < 0 ||
            head.y < 0 ||
            head.x >= boardSize ||
            head.y >= boardSize ||
            isCollision()
          ) {
            clearInterval(gameInterval);
            swal(
              `Game Over! Your Score is ${score}`,
              "Please start again!",

              "error"
            );
            resetGame();
          }

          isChangingDirection = false;
          document.getElementById("scores").innerHTML = score;
        }
        // Check for collision with snake body
        function isCollision() {
          const head = snake[0];
          for (let i = 1; i < snake.length; i++) {
            if (snake[i].x === head.x && snake[i].y === head.y) {
              return true;
            }
          }
          return false;
        }

        // Reset the game
        function resetGame() {
          snake.length = 1;
          dx = 0;
          dy = 0;
          score = 0;
          generateFood();
          drawBoard();
        }

        // Start the game
        generateFood();
        drawBoard();
        gameInterval = setInterval(gameLoop, 125); // Initial speed
        document.addEventListener("keydown", changeDirection);
      });
    </script>
  </body>
</html>
